---
import type { HttpTypes } from "@medusajs/types";
import { t } from "@/i18n/translations";
import { convertToLocale } from "@/lib/utils/medusa";
import { Body } from "../shared/typography/body";
import { Heading } from "../shared/typography/heading";

interface Props {
  cart: HttpTypes.StoreCart;
}

const { cart } = Astro.props;
const { language } = Astro.locals;

const summaryItems = [
  { amount: cart.subtotal, label: t("checkout.subtotal", language) },
  { amount: cart.tax_total, label: t("checkout.taxes", language) },
  { amount: cart.shipping_total, label: t("checkout.shipping", language) },
];

const totalDisplay = convertToLocale({
  amount: cart.total,
  currency_code: cart.currency_code,
});
---

{summaryItems.map(item => {
  const display = convertToLocale({amount: item.amount, currency_code: cart.currency_code})
  return (
    <div class="flex items-center justify-between">
      <Body font="sans" mobileSize="lg">
        {item.label}
      </Body>
      <Body font="sans" mobileSize="lg">
        {display}
      </Body>
    </div>
  )
})}
<div class="h-px w-full bg-accent" />
<div class="flex items-center justify-between">
  <Heading desktopSize="base" font="sans" mobileSize="base" tag="h3">
    {t("checkout.total", language)}
  </Heading>
  <Heading desktopSize="base" font="sans" mobileSize="base" tag="h3">
    {totalDisplay}
  </Heading>
</div>
